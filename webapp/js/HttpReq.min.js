function HttpReq(e,a,t,n){this.url=void 0,this.metodo=void 0,this.xmlHttpRequest=void 0,this.variaveisCache=void 0,this.construtor=function(e,a){return this.metodo=e,this.url=a,this.xmlHttpRequest=new XMLHttpRequest,t||(t=function(e){console.log("Sucesso:"+e)}),n||(n=function(e){console.log("erro")}),!0},this.enviar=function(e,a,i,o){if("undefined"==typeof e?e="":this.variaveisCache=e,"undefined"==typeof a&&(a=!1),"undefined"==typeof i&&(i=!0),("undefined"==typeof o||1>o)&&(o=3e4),this.xmlHttpRequest.onreadystatechange=function(){if(4==this.readyState&&200==this.status)t(this.response),i&&carregando.fechar();else if(4==this.readyState&&200!=this.status)if(401==this.status)if(localStorage.getItem("usuario")){var e=new Usuario;e.json(localStorage.getItem("usuario"));var a=new HttpReq("post",pagina.apiUrl()+"usuario/entrar",function(a){if("-1"==a)alerta.abrirErro("E-mail ou senha inválidos."),localStorage.setItem("usuario",void 0),pagina.abrirPaginas("login");else if("0"==a)alerta.abrirErro("Erro ao entrar. Por favor, verifique os dados inseridos e tente novamente mais tarde."),localStorage.setItem("usuario",void 0),pagina.abrirPaginas("login");else{var t=e.getSenha();a=JSON.parse(a),e=new Usuario,e.json(a[0]),e.setSenhaSemVerificar(t),localStorage.setItem("usuario",e.jsonString());var n=new Token(a[1]);localStorage.setItem("token",n.jsonString())}},function(e){console.log("erro perda de conexao"),localStorage.setItem("usuario",void 0),pagina.abrirPaginas("login")});a.enviar("usuario="+e.jsonString()),typeof n==typeof Function&&n()}else alerta.abrirErro("Esse acesso precisa ser autenticado.",1e4),console.log(this.status+" : "+this.readyState),carregando.terminar(n);else 404==this.status?(alerta.abrirErro("Serviço não encontrado",1e4),console.log(this.status+" : "+this.readyState),carregando.terminar(n)):(alerta.abrirErro("Erro desconhecido. Tente novamente mais tarde."),console.log(this.status+" : "+this.readyState),carregando.terminar(n))},"post"!=this.metodo)return alert("Método inválido: "+this.metodo),!1;this.xmlHttpRequest.open("POST",this.url,!0),this.xmlHttpRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8"),this.xmlHttpRequest.timeout=o;var r="";return localStorage.getItem("token")&&e?r="token="+localStorage.getItem("token")+"&"+e:localStorage.getItem("token")&&!e?r="token="+localStorage.getItem("token"):!localStorage.getItem("token")&&e&&(r=e),this.xmlHttpRequest.send(r),i&&carregando.abrir(o,"Verifique a sua conexão com a Internet e tente novamente."),!0},this.construtor(e,a)}